<!doctype html>
<html lang="en">
<head>
        <meta charset="utf-8">
		<link rel="stylesheet" href="../css/theme/ajf.css">
</head>
<body>
                    <svg class="timedevice"></svg>


        <script src="../js/d3.min.js"></script>
        <script type="text/javascript">

    var width = 800;
    var height = 300;

    var dataset = null;

    var color = d3.scale.category10();

    var x = d3.scale.linear()
        .range([0, width-20]);
//        .domain([0, 23]);
    var y = d3.scale.linear()
        .range([height-20, 0]);
//        .domain([0, 200000]);


    var chart = d3.select(".timedevice")
        .attr("width", width)
        .attr("height", height);

        var xAxis = d3.svg.axis()
            .scale(x)
            //.orient("bottom");

       
    var line = d3.svg.line()
        .x(function(d) { return x(d.Hour); })
        .y(function(d) {return y(d.Sessions); });
        //.y(function(d) { console.log( y(d.Sessions)); return y(d.Sessions); })


        d3.csv("/data/hour_visitation.csv", function(data){ 
            
            data.forEach(function(d) {
                d.Sessions = parseInt(d.Sessions.replace(",", ""));
                d.Hour = +d.Hour;
            });
            
            x.domain(d3.extent(data, function(d) { return d.Hour; }));
            y.domain(d3.extent(data, function(d) { return d.Sessions; }));

            console.log(x.domain());
            dataset = data;    

            chart.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(10," + (height-20) + ")")
                .call(xAxis);
            
            chart.append("path")
                .datum(dataset)
                .attr("class", "line")
                .attr("d", line);
        });
        </script>        
</body>
</html>
